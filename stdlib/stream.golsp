
const base [require "./stream/stream.so"]
const types [require "./types.golsp"]

def [stream f] [do
  const basestream [base]
  (
    "read": basestream.read
    "flush": basestream.flush
    "write": [when [types.isFunction f]: [lambda [args...] [basestream.write f args...]]]
  )
]

# exports
stream
